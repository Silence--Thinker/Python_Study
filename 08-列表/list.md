# 列表和元组
[toc]

## 序列概述

Python中，最基本的数据结构是**序列**。序列中每个元素都有编号，即其位置和索引，其中第一个元素的索引为0，第二个元素的索引为1，以此类推。

Python内置了多种序列，我们讨论的是最常用的两种**列表**和**元组**。

在处理一些列值时，序列很有用。你可以将信息储存在序列中

	edward = ['Edward Gumby', 42]
序列还可以包含其他序列:

	edward = ['Edward Gumby', 42]
	john = ['John Smith', 50]
	database = [edward, john]

Python支持一种数据结构的基本概念**容器**。容器基本上就是可以包含其他对象的对象。两种主要的容器是序列（列表和元组）和映射（字典）。序列中，元素是有编号的，映射中，元素都存在名称（键）。
	
## 通用的序列操作

有几种操作适用于所有序列，包括**索引**、**切片**、**相加**、**相乘**和**成员资格**检查。

`注意`：有一个重要的操作这里不会介绍，他就是**迭代**。

### 索引

序列中的所有元素都有编号————从0开始递增。

	greeting = 'hello'
	print greeting[0]
	'H'
`注意`：字符串就是由字符组成的序列。Python中没有专门用于表示字符的类型，因此一个字符就是只包含一个元素的字符串。

这种索引方式适用于所有的序列。当你使用负数索引时，Python将从右开始往左数，因此-1是最后一个元素的位置。

	greeting[-1]
	'o'
对于字符串字面量（以及其他的序列字面量），可以直接对其使用索引操作。

	'Hello'[1]
	'e'
函数返回是序列，可以直接对其进行索引操作。
	
	>>> fourth = input('Year: ')[3]
	Year: 2005
	>>> fourth
	'5'
**索引操作示例 2-1**
	
	# 将以数指定年、月、日的日期打印出来
	months = [
		'January',
		'February',
		'March',
		'April',
		'May',
		'June',
		'July',
		'August',
		'September',
		'October',
		'November',
		'December'
	]
	
	# 一个列表，其中包含1-31对应的结尾
	endings = ['st', 'nd', 'rd'] + 17 * ['th'] \
			+ ['st', 'nd', 'rd'] + 7 * ['th'] \
			+ ['st']
	year = input('Year: ')
	month = input('Month (1-12): ')
	day = input('day (1-31): ')
	
	month_number = int(month)
	day_number = int(day)
	
	# 将月和日的数减1，才能得到正确的索引
	month_name = months[month_number - 1]
	ordinal = "%s" % day +  endings[day_number - 1]

	print(month_name + ' ' + ordinal + ', ' + "%s" % year)
	
运行情况如下：
	
	Year: 1974
	Month (1-12): 8
	Day (1-31): 16
	August 16th, 1974
	
### 切片

除使用索引来访问当个元素外，还可以使用**切片**来访问特定**范围**的元素。为此，可使用两个索引，并用冒号分隔:

	>>> tag = '<a href="http://ww.python.org">Python web site</a>'
	>>> tag[9:30]
	'http://ww.python.org'
	>>> tag[32:-4]
	'Python web site'

切片适用于提取序列的一部分。第一个索引是包含的第一个元素的编号，第二个索引是切片后余下的第一个元素的编号。

	>>> number = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
	>>> number[3:6] [4, 5, 6]
	>>> number[0:1] [1]

**1.绝妙的简写**

	# 最后三个元素
	>>> number[7:10]
	[8, 9, 10]
	
	>>> number[-3:-1]
	[8, 9]
	
	# 注意这种情况的值
	>>> number[-3:0] 
	[]
	
如果切片结束于序列末尾，可省略第二个索引

	>>> number[-3:]
	[8, 9, 10]

同样，如果切片始于序列开头，可省略第一个索引。

	>>> number[:3]
	[1, 2, 3]
	
事实上，要复制整个序列，可将两个索引都省略
	
	>>> number[:]
	[1, 2, 3, 4, 5, 6, 7, 8, 9, 10]

**2.更大的步长**

在普通切片操作中，默认省略一个参数，即步长。在普通切片中，步长为1.

	>>> number[0:10:1]
	[1, 2, 3, 4, 5, 6, 7, 8, 9, 10]

如果步长为2，将间隔一个元素提取元素

	>>> number[0:10:2]
	[1, 3, 5, 7, 9]
	number[3:6:3]
	[4]

显示指定步长，简写

	>>> number[::4]
	[1, 5, 9]
	
`注意`: 步长不能为0，但是可以为负数，即从右向左提取元素

	>>> number[8:3:-1]
	[9, 8, 7, 6, 5]
	>>> number[10:0:-2]
	[10, 8, 6, 4, 2]
	>>> number[0:10:-2]
	[]
	>>> number[::-2]
	[10, 8, 6, 4, 2]
	>>> number[5::-2]
	[6, 4, 2]
	>>> number[:5:-2]
	[10, 8]
	
### 序列相加

可使用加法运算来拼接序列。
    
    >>> [1, 2, 3] + [4, 5, 6]
    [1, 2, 3, 4, 5, 6]
    >>> 'Hello, ' + 'world!'
    'Hello, world!'
    >>> [1, 2, 3] + 'world'
        [1, 2, 3] + 'world'
    TypeError: can only concatenate list (not "str") to list

`提示`：错误消息可知，不能拼接列表和字符串。即：不能拼接不同类型的序列。

### 乘法

将序列与数x相乘时，将重复这个序列x次来创建新的序列：

    >>> 'python' * 5
    'pythonpythonpythonpythonpython'
    >>> [12] * 3
    [12, 12, 12]

#### None、空列表和初始化

空列表为：[], 创建一个包含10个元素的列表，但是没有任何有用的内容，可使用None。

Python中None表示什么都没有

    >>> sequence = [None] * 10
    [None, None, None, None, None, None, None, None, None, None]

### 成员资格

要检查一个特定的值是否包含在序列中，可使用运算符*in*。

    >>> permissions = 'rw'
    >>> 'w' in permissions
    True

**长度、最小值和最大值**

    >>> number = [100, 34, 678]
    >>> len(number)
    3
    >>> min(number)
    34
    >>> max(number)
    678

## 列表: Python的主力

### 函数list

鉴于不能像修改列表那样修改字符串，使用字符串创建列表，可使用函数list（list实际上是一个类）
    >>> list('hello')
    ['h', 'e', 'l', 'l', 'o']

`注意`：可以将任何序列作为list的参数，而不仅仅是字符串。

### 基本的列表操作

#### 修改列表：给元素赋值

    >>> x = [1, 1, 1]
    >>> x[1] = 2
    [1, 2, 1] 

#### 删除元素

    >>> names = ['Alice', 'Beth', 'Cecil']
    >>> del name[2]
    ['Alice', 'Beth']

#### 给切片赋值
    
    >>> name = list('Perl')
    ['P', 'e', 'r', 'l']
    >>> name[2:] = list('ar')
    ['P', 'e', 'a', 'r']

使用切片赋值还可以在不替换原有元素的情况下，插入新元素

    >>> number = [1, 5]
    >>> number[1:1] = [2, 3, 4]
    [1, 2, 3, 4]

可以使用相反的操作来删除切片

    >>> number = [1, 2, 3, 4, 5]
    >>> number[1:4] = []
    [1, 5]
    
### 列表方法

#### append

向列表中追加元素

    >>> lst = [1, 2, 3]
    >>> lst.append(4)
    [1, 2, 3, 4]

#### clear

清空列表中所有元素

    >>> lst = [1, 2, 3, 4]
    >>> lst.clear()
    []

#### copy

获取一个列表的拷贝

    >>> a = [1, 2, 3]
    >>> b = a
    >>> b[1] = 4
    >>> a
    [1, 4, 3]
    
    >>> a = [1, 2, 3]
    >>> b = a.copy()
    >>> b[1] = 4
    >>> a
    [1, 2, 3]
    
类似于使用a[:]或者list(a)，他们也是复制a

#### count

count计算指定的元素在列表中出现了多少次？

    >>> ['to', 'be', 'or', 'not', 'to', 'be'].count('to')
    2
    
#### extend

使用一个列表来拓展另一个列表

    >>> a = [1, 2, 3]
    >>> b = [4, 5, 6]
    >>> a.extend(b)
    >>> a
    [1, 2, 3, 4, 5, 6]

类似于`a+b`但是extend的效率比`a+b`高

#### index

查找指定值在类表中第一次出现的索引

    >>> knights = ['We', 'are', 'the', 'knights', 'who', 'say', 'ni']
    >>> knights.index('who')
    4
    >>> knights.index('herring')
    ValuewError: list.index(x): x not in list

注意参数需要在list列表中

#### insert

将一个对象插入列表中
    
    >>> number = [1, 2, 3, 5]
    >>> number.insert(3, 'four')
    >>> [1, 2, 3, 'four', 5]

等价于`number[3:3] = ['four']`

#### pop

从列表中删除一个元素（默认为最后一个元素），并返回这一元素。

    >>> x = [1, 2, 3]
    >>> x.pop()
    3
    >>> x.pop(0)
    1

`注意`：pop是唯一既修改列表有返回一个非None值的列表方法

#### remove 

删除第一个列表中第一个指定值的元素

    >>> x = ['to', 'be', 'or', 'not', 'to', 'be']
    >>> x.remove('be')
    ['to', 'or', 'not', 'to', 'be']
    >>> x.remove('bee')
    ValueError: list.remove(x): x not in list

#### reverse

将列表中的元素按相反的顺序排列

    >>> x = [1, 2, 3]
    >>> x.reverse()
    >>> [3, 2, 1]
    
`注意`：reverse不返回任何值，是在原来的列表上修改。和sort一致

#### sort

对于列表就地排序。就地排序一位置对原来的列表进行修改，使其元素顺序改变

    >>> x = [4, 6, 2, 1, 7, 8]
    >>> x.sort()
    >>> [1, 2, 4, 6, 7, 8]

不要使用sort的返回值

    >>> x = [4, 6, 2, 1, 7, 8]
    >>> x = x.sort()
    >>> None
    
使用copy避免这种情况

    >>> x = [4, 6, 2, 1, 7, 8]
    >>> y = x.copy()
    >>> y.sort()
    >>> x
    [4, 6, 2, 1, 7, 8]
    >>> y 
    [1, 2, 4, 6, 7, 8]

#### 高级排序

sort方法接受连个可选参数：key和reverse。

参数key类似于参数cmp：你将设置一个用于排序的函数，然而不会直接用这个函数来直接判读元素的大小，而是使用它来为每个元素创建一个键，在根据这些键对元素排序。
    
    >>> x = ['aardvark', 'abalone', 'acme', 'add', 'aerate']
    >>> x.sort(key=len)
    ['add', 'acme', 'aerate', 'abalone', 'aardvark']
    
参数reverse，只需要一个真值，表示是否按顺序或者反序进行排序

    >>> x = [4, 6, 2, 1, 7, 8]
    >>> x.sort(reverse=True)
    >>> [8, 7, 6, 4, 2, 1]

## 元组: 不可修改的序列

与列表一样，元祖也是序列，唯一的差别在于元祖是不能修改的。元祖语法很简单，只要将一些值用逗号分隔，就能自动创建一个元祖。

    >>> 1, 2, 3
    (1, 2, 3)
    
    >>> (1, 2, 3)
    (1, 2, 3)

只包含一个值的元祖

    >>> 42
    42
    >>> 42,
    (42,)
    >>> (42,)
    >>> (42,)

函数tuple, 他将一个序列作为参数,并将其转换为元祖。（同理，tuple也是一个类）。

    >>> tuple([1, 2, 3])
    (1, 2, 3)
    >>> x = (1, 2, 3)
    >>> x[1]
    2
    >>> x[0:2]
    (1, 2)


* 元祖的切片也是元祖
* 元祖可以用作映射的键

## 小结

* **序列**：序列是一种数据结构，其中的元素带编号（编号从0开始）。列表、字符串和元祖都是序列。列表是可变的，而元祖和字符串是不可变的。访问序列的一部分，可使用切片操作。修改列表，使用元素赋值。
* **成员资格**：要确定特定的值是否在序列中。使用运算符in。in用于字符串是情况特殊---这样可以查找子串
* **方法**：内置类型（列表、元祖、字符串）提供了很多有用的方法。

### 本章介绍的新函数

|函数|描述|
|:---|:---|
|len(seq)|返回序列的长度|
|list(seq)|将序列转化为列表|
|max(args)|返回序列会一组参数中的最大值|
|min(args)|返回序列会一组参数中的最小值|
|reversed(seq)|让你能够反向迭代序列|
|sorted(seq)|返回一个有序列表，其中包含指定序列中的所有元素|
|tuple(seq)|将序列转换为元祖|


